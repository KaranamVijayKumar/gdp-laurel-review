/*! Laurel_Review_admin - v1.0.0 | (c) Arpad Olasz | Proprietary. */
!function(a){"use strict";var b="issuesTocManager",c={init:function(c){return this.each(function(){var d=a(this),e=d.data(b);e||(e=a.extend({addHeader:".js-issues-toc__addHeader",addContent:".js-issues-toc__addContent",itemListContainer:".js-issues-toc__list",itemListEntry:"js-issues-toc__entry",templatesContainer:".js-issues-toc__templates",headerTemplate:".js-issues-toc__templates-header",contentTemplate:".js-issues-toc__templates-content",upEntry:".js-issues-toc__moveUpEntry",downEntry:".js-issues-toc__moveDownEntry",removeEntry:".js-issues-toc__removeEntry",entryTitlesContainer:".js-issues-toc__titles",entryTitleContainer:".js-issues-toc__title",addTitle:".js-issues-toc__addTitle",upTitle:".js-issues-toc__moveUpTitle",downTitle:".js-issues-toc__moveDownTitle",removeTitle:".js-issues-toc__removeTitle",order:".js-issues-toc__order",titleOrder:".js-issues-toc__title-order",existingFile:".js-issues-toc__title-existingFile",newFile:".js-issues-toc__title-newFile",removeFile:".js-issues-toc__removeFile"},c),d.data(b,e),d.on("click."+b,e.addHeader,i.addHeader).on("click."+b,e.addContent,i.addContent).on("click."+b,e.upEntry,i.upEntry).on("click."+b,e.downEntry,i.downEntry).on("click."+b,e.removeEntry,i.removeEntry).on("click."+b,e.addTitle,i.addTitle).on("click."+b,e.upTitle,i.upTitle).on("click."+b,e.downTitle,i.downTitle).on("click."+b,e.removeTitle,i.removeTitle).on("click."+b,e.removeFile,i.removeFile))})},destroy:function(){return this.each(function(){var c=a(this),d=c.data(b);a(this).off("."+b),d[b].remove(),c.removeData(b)})}},d=function(b){a("> ."+b.itemListEntry,this).each(function(c){a(b.order,this).val(c)})},e=function(b){a("> "+b.entryTitleContainer,this).each(function(c){a(b.titleOrder,this).val(c)})},f=function(b){var c=a(this).data("id");"undefined"!=typeof c&&a("input, select, textarea",a(this)).each(function(){var d=a(this).attr("name").replace(b,"["+c+"]");a(this).attr("name",d).prop("disabled",!1)})},g=function(){return"new_"+Math.random().toString(36).substring(7)},h=function(){a(":text",this).first().focus()},i={addHeader:function(c){c.preventDefault();var e=a(c.delegateTarget),i=e.data(b),j=a(i.templatesContainer+" "+i.headerTemplate,e).clone(!0,!0).addClass(i.itemListEntry).data("id",Math.random().toString(36).substring(7));a("input, select, textarea",j).prop("disabled",!1),a(i.itemListContainer,e).append(j),d.apply(a(i.itemListContainer,e),[i]),j.data("id",g()),f.apply(j,["[%]"]),h.apply(j)},addContent:function(c){c.preventDefault();var e=a(c.delegateTarget),i=e.data(b),j=a(i.templatesContainer+" "+i.contentTemplate,e).clone(!0,!0).addClass(i.itemListEntry);a("input, select, textarea",j).prop("disabled",!1),d.apply(a(i.itemListContainer,e).append(j),[i]),j.data("id",g()),f.apply(j,["[%]"]),a(i.entryTitlesContainer+" > li",j).each(function(){var b=a(this);b.data("id",g()),f.apply(b,["[%%]"])}),h.apply(j)},upEntry:function(c){c.preventDefault();var e=a(c.delegateTarget),f=e.data(b),g=a(this).parents("."+f.itemListEntry).first(),h=g.prev();h.length&&(h.before(g),d.apply(a(f.itemListContainer,e),[f]))},downEntry:function(c){c.preventDefault();var e=a(c.delegateTarget),f=e.data(b),g=a(this).parents("."+f.itemListEntry).first(),h=g.next();h.length&&(h.after(g),d.apply(a(f.itemListContainer,e),[f]))},removeEntry:function(c){c.preventDefault();var e=a(c.delegateTarget),f=e.data(b),g=a(this).parents("."+f.itemListEntry).first();g.remove(),d.apply(a(f.itemListContainer,e),[f])},addTitle:function(c){c.preventDefault();var d=a(c.delegateTarget),i=d.data(b),j=a(i.templatesContainer+" "+i.contentTemplate+" "+i.entryTitlesContainer+" > li",d).clone(!0,!0);j.attr("data-id",g()),a("input, select, textarea",j).prop("disabled",!1);var k=a(this).parents(i.contentTemplate).first(),l=a(i.entryTitlesContainer,k),m=l.parents("."+i.itemListEntry).first();l.append(j),f.apply(m,["[%]"]),f.apply(j,["[%%]"]),e.apply(j.parents(i.entryTitlesContainer).first(),[i]),h.apply(j)},upTitle:function(c){c.preventDefault();var d=a(c.delegateTarget),f=d.data(b),g=a(this).parents(f.entryTitleContainer).first(),h=g.prev();h.length&&(h.before(g),e.apply(g.parents(f.entryTitlesContainer).first(),[f]))},downTitle:function(c){c.preventDefault();var d=a(c.delegateTarget),f=d.data(b),g=a(this).parents(f.entryTitleContainer).first(),h=g.next();h.length&&(h.after(g),e.apply(g.parents(f.entryTitlesContainer).first(),[f]))},removeTitle:function(c){c.preventDefault();var d=a(c.delegateTarget),f=d.data(b),g=a(this).parents(f.entryTitleContainer).first(),h=g.parents(f.entryTitlesContainer).first();g.remove(),e.apply(h,[f])},removeFile:function(c){c.preventDefault();var d=a(c.delegateTarget),e=d.data(b),g=a(this).parents(e.entryTitleContainer).first(),h=a(this).parents(e.existingFile),i=a(e.templatesContainer+" "+e.contentTemplate+" "+e.newFile,d).first(),j=i.clone(!0,!0);a("input, select, textarea",j).prop("disabled",!1),h.replaceWith(j);var k=g.parents("."+e.itemListEntry);f.apply(k,["[%]"]),f.apply(g,["[%%]"])}};a.fn.issuesTocManager=function(b){return c[b]?c[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.issuesTocManager"):c.init.apply(this,arguments)}}(jQuery);