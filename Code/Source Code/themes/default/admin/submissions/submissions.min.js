/*! Laurel_Review_admin - v1.0.0 | (c) Arpad Olasz | Proprietary. */
!function(){"use strict";var a,b=$("body"),c=$(".submission__activity"),d=function(){jQuery.ajax({url:c.data("url"),method:"get",dataType:"json",beforeSend:function(){clearInterval(a)}}).done(function(b){b.error&&c.html(b.error),c.html(b.html),a=window.setInterval(d,15e3)})};c.length&&d(),b.on("click",".actions__like",function(a){a.preventDefault();var b=$(this);return b.hasClass("loading")?!1:void jQuery.ajax({url:b.prop("href"),data:{value:b.data("value")},method:"post",beforeSend:function(){$("a.actions__like").addClass("btn--disabled action--inactive loading")}}).always(function(){$("a.actions__like").removeClass("btn--disabled action--inactive loading")}).done(function(a){return"ok"!==a.result?!1:(a.value=parseInt(a.value,10),void $(".actions__like").each(function(){var b=$("<span>").html($(this).html()),c=parseInt($(this).data("value"),10);b.addClass(-1===c?"i-thumbs-o-down btn--disabled "+(-1===a.value?"action--negative":"action--inactive"):"i-thumbs-o-up btn--disabled "+(1===a.value?"action--positive":"action--inactive")),a.value===c&&b.html(a.count),$(this).replaceWith(b),d()}))})});var e=$(".viewer");"undefined"!=typeof Crocodoc&&e.length&&e.each(function(){var a=Crocodoc.createViewer(this,{url:$(this).data("url"),layout:Crocodoc.LAYOUT_VERTICAL_SINGLE_COLUMN});a.load(),$(".viewer-zoom-in").on("click",function(b){b.preventDefault(),a.zoom(Crocodoc.ZOOM_IN)}),$(".viewer-zoom-out").on("click",function(b){b.preventDefault(),a.zoom(Crocodoc.ZOOM_OUT)})});var f=$("#activity_form"),g=function(a){a.preventDefault(),jQuery.post(f.prop("action"),f.serializeArray(),function(a){return a.error&&jQuery().wsNotify?($(".notifications > ol").wsNotify("show",{content:a.error,title:a.errorTitle,icon:"exclamation-circle",type:"negative"}),!1):(d(),$("textarea",f).val(""),jQuery().redactor&&$(".text-input--redactor",f).each(function(){$(this).redactor("insert.set","")}),$("button",f).blur(),void(jQuery().wsNotify&&$(".notifications > ol").wsNotify("show",{content:a.notice,title:a.noticeTitle,icon:"info-circle",type:"positive"})))}).fail(function(a,b,c){$(".notifications > ol").wsNotify("show",{content:a.status+" "+c,title:"Error",icon:"exclamation-circle",type:"negative"})})};f.on("submit",g)}();