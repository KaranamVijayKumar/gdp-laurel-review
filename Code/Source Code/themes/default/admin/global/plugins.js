/*! Story_admin_theme - v2.0.6 | (c) Arpad Olasz | Proprietary. */
!function(a){function b(a){if(a.focus(),"undefined"!=typeof window.getSelection&&"undefined"!=typeof document.createRange){var b=document.createRange();b.selectNodeContents(a),b.collapse(!1);var c=window.getSelection();c.removeAllRanges(),c.addRange(b)}else if("undefined"!=typeof document.body.createTextRange){var d=document.body.createTextRange();d.moveToElementText(a),d.collapse(!1),d.select()}}var c="wsEditable",d=["save","process","edit"],e="ws-next-status",f="ws-original-value",g={init:function(b){return this.each(function(){var f=a(this),g=f.data(c);if(!g){g=a.extend({button:"[data-edit]",editClass:"i-edit",errorClass:"i-warning i--negative",processClass:"i-spinner",saveClass:"i-check-circle i--positive",savedClass:"i-check i--positive",success:function(){},error:function(){}},b),a.each(f.data(),function(a,b){a.substr(0,c.length)===c.toLowerCase()&&(g[a.substr(c.length,1).toLowerCase()+a.substr(c.length+1)]=b)}),a(this).data(c,g);var i=a(),k=a(g.button,f).each(function(){i=i.add(a("#"+a(this).data("edit")))});i.each(function(){j.edit.apply(this,[this])}),i.on("keydown."+c,function(a){k.data(e)===d[1]&&13===a.which&&(a.preventDefault(),k.trigger("click.",{data:g,editable:f}))}).on("paste."+c,function(a){a.preventDefault();var b=a.originalEvent.clipboardData.getData("text/plain").replace(/\s+/g," ").trim();document.execCommand("insertHTML",!1,b)}).on("keyup."+c,function(b){27===b.which&&h.blur.apply(k,[b,a(this),g])}),a(document).on("click."+c,function(b){b.stopPropagation(),0===a(b.target).closest(f).length&&h.blur.apply(k,[b,i,g])}),f.off("click."+c).on("click."+c,g.button,{data:g,editable:f},h.click)}})}},h={blur:function(a,b,c){b.html(b.data(f)).blur().prop("contenteditable",!1),i.edit.apply(this,[c])},click:function(b,c){b.preventDefault();var f=a(this),g=a("#"+f.data("edit")),h=f.data(e);void 0===c&&(c=b.data),h||(h=d[0]),j[h].apply(this,[g,c]),i[h].apply(this,[c.data])}},i={edit:function(b){var c=[b.errorClass,b.processClass,b.saveClass].join(" ");a(this).removeClass(c).addClass(b.editClass).data(e,d[0])},save:function(b){var c=[b.editClass,b.errorClass,b.processClass].join(" ");a(this).removeClass(c).addClass(b.saveClass).data(e,d[1])},process:function(b){var c=[b.editClass,b.errorClass,b.saveClass].join(" ");a(this).removeClass(c).addClass(b.processClass).data(e,d[2])},error:function(b){var c=[b.editClass,b.saveClass,b.processClass].join(" ");a(this).removeClass(c).addClass(b.errorClass).data(e,d[2])},saved:function(b){var c=[b.editClass,b.errorClass,b.saveClass,b.processClass].join(" ");a(this).removeClass(c).addClass(b.savedClass)}},j={edit:function(b){a(b).blur().prop("contenteditable",!1)},save:function(a,c){a.data(f,a.text()),a.prop("contenteditable",!0),b(a.get(0)),i.save.apply(this,[c.data])},process:function(b,d){var e=a(this).prop("title","");b.blur().prop("contenteditable",!1),a(d.editable).off("click."+c).on("click."+c,function(a){a.preventDefault()}),a.ajax(e.data("edit-url"),{cache:!1,method:"POST",data:{value:b.text()},dataType:"json",error:function(a,c,f){i.error.apply(e,[d.data]),e.prop("title",f),d.data.error.apply(e,[b,d])},success:function(a){a.error?(i.error.apply(e,[d.data]),e.prop("title",a.error)):(i.saved.apply(e,[d.data]),b.html(a.value),b.data(f,a.value),d.data.success.apply(e,[b,d]),setTimeout(function(){e.fadeOut(function(){i.edit.apply(e,[d.data]),e.show(),"block"===e.css("display")&&e.css("display","inline-block")})},200))},complete:function(){a(d.editable).on("click."+c,d.data.button,{data:d.data,editable:d.editable},h.click)}})}};a.fn.wsEditable=function(b){return g[b]?g[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.wsEditable"):g.init.apply(this,arguments)}}(jQuery),function(a){"use strict";var b="fieldloader",c={init:function(c){return this.each(function(){var d=a(this),e=d.data(b),g={};e||(a.each(a(this).data(),function(a,c){if(a.substr(0,b.length)===b.toLowerCase()){var d=a.substr(b.length,1).toLowerCase()+a.substr(b.length+1);g[d]=c}}),e=a.extend({classNotice:"js-placeholders--notice",classPlaceholders:"js-placeholders",classVisibility:"visuallyhidden",propertiesKey:'class="1/5 purple"',propertiesValue:""},c,g),a(this).data(b,e),""!==d.val()&&f.apply(d),d.on("change",f))})},destroy:function(){return this.each(function(){var c=a(this),d=c.data(b);a(window).off("."+b),d[b].remove(),c.removeData(b)})}},d=function(c){var d=a(this),e=d.data(b),f=a("."+e.classPlaceholders+" tbody");f.empty(),jQuery.each(c,function(b,c){var d="<tr><td "+e.propertiesKey+">"+b+"</td><td "+e.propertiesValue+">"+c+"</td></tr>";f.append(a(d))}),a("."+e.classPlaceholders).removeClass(e.classVisibility),a("."+e.classNotice).addClass(e.classVisibility)},e=function(){var c=a(this),d=c.data(b);a("."+d.classPlaceholders).addClass(d.classVisibility),a("."+d.classNotice).removeClass(d.classVisibility)},f=function(){var c=a(this),f=c.data(b);return""===c.val()?void e.apply(c):void a.ajax({url:f.url,data:{id:c.val()},method:"post",dataType:"json"}).done(function(b){"undefined"!=typeof b.error?e.apply(c):jQuery.each(b,function(b,e){if("placeholders"!==b){var f=a(".js-"+b).val(e);f.redactor&&f.hasClass("text-input--redactor")&&a(f).redactor("code.set",e)}else d.apply(c,[e])})})};a.fn.fieldloader=function(b){return c[b]?c[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.fieldloader"):c.init.apply(this,arguments)}}(jQuery),function(a){var b="multiple",c={init:function(c){return this.each(function(){var e=a(this),g=e.data(b);g||(g=a.extend({max:100,template:a(a("template",this).html()),addButton:a(".js-"+b+"-add",this),removeButtonClass:".js-"+b+"-remove",add:a.noop,remove:a.noop,canAdd:a.noop,cannotAdd:a.noop},c),a(this).data(b+"Max")&&(g.max=a(this).data(b+"Max")),d.apply(this,[g]),h.apply(this,[g]),a(this).on("click."+b,g.removeButtonClass,function(a){a.preventDefault(),f.apply(this,[e])}),a(this).data(b,g))})},add:function(){var c=a(this),d=c.data(b);h.apply(this,[d]),d.addButton.trigger("click."+b)},removeByIndex:function(c){var d=a(this),e=d.data(b),f=a(e.items.get(c));f.length&&a(e.removeButtonClass,f).trigger("click."+b)},destroy:function(){return this.each(function(){var c=a(this),d=c.data();d[b].addButton.off("."+b),a(this).off("click."+b,d[b].removeButtonClass),a(window).off("."+b),d[b].remove(),c.removeData(b)})}},d=function(b){var c=a(this),d=e.apply(c,[b]);return b.items=c.children().filter(d)},e=function(b){var c=a(a(b.template).clone().empty().wrap("<div>").parent().html()),d=c.attr("class");return c[0].tagName+(d?"."+d.replace(/\s/g,"."):"")},f=function(c){var f=a(this),g=c.data(b),i=f.parents(e.apply(f,[g])).first();i.slideUp(100,function(){g.remove.apply(f,i),i.remove(),d.apply(f,[g]),h.apply(c,[g])})},g=function(){var c=a(this),e=c.data(b),f=e.template.clone().wrap("<div>").parent().html();f=a(a(f.replace(/_\%/g,"_"+(e.items.length+1)))),e.addButton.before(f),d.apply(c,[e]),e.add.apply(c,[f]),h.apply(this,[e])},h=function(c){var d=a(this);c.items.length>=c.max?(c.addButton.hide().off("click."+b),c.cannotAdd.apply(d)):(c.canAdd.apply(d),c.addButton.show().off("click."+b).on("click."+b,function(a){a.preventDefault(),g.apply(d,[a])}))};a.fn.multiple=function(b){return c[b]?c[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.multiple"):c.init.apply(this,arguments)}}(jQuery),function(a,b){a.fn.nearest=function(c){function d(b){f=f?f.add(b):a(b)}var e,f,g,h,i,j=b.querySelectorAll;return this.each(function(){e=this,a.each(c.split(","),function(){if(h=a.trim(this),h.indexOf("#"))for(i=e.parentNode;i;){if(g=j?i.querySelectorAll(h):a(i).find(h),g.length){d(g);break}i=i.parentNode}else d(j?b.querySelectorAll(h):a(h))})}),f||a()}}(jQuery,document),function(a){var b="wsNotify",c={init:function(c){return this.each(function(){var g=a(this),h=g.data(b);h||(h=a.extend({alive:4e3},c),a(this).data(b,h));var i=a("> li",this).each(function(b){e.apply(a(this).delay(200*b)),f.apply(this,[(b+1)*h.alive])});d.apply(i,[h])})},show:function(c){var g=a('<li class="notification"><div class="flag"><div class="flag__body"></div></div></li>');return c.type&&g.addClass("notification--"+c.type),c.id&&g.prop("id",c.id),c.icon&&a(".flag",g).prepend('<div class="flag__img i-'+c.icon+'">&nbsp;</div>'),c.title?a(".flag__body",g).append('<span class="notification__title">'+c.title+"</span>").append('<span class="notification__content">'+c.content+"</span>"):a(".flag__body",g).append(c.content),this.each(function(){var c=a(this),h=c.data(b);d.apply(g,[h]),c.append(g),e.apply(g.delay(200)),f.apply(g.delay(1e3),[h.alive])})},hide:function(){return this.each(function(){a("> li",this).each(function(a){f.apply(this,[300*a,300])})})},destroy:function(){return this.each(function(){var c=a(this),d=c.data(b);a(window).off("."+b),d[b].remove(),c.removeData(b)})}},d=function(c){return a(this).on("mouseenter."+b,function(){clearTimeout(a(this).data("timeout"))}).on("mouseleave."+b,function(){f.apply(a(this).delay(1e3),[c.alive])}).on("click."+b,function(){f.apply(a(this),[0])}).children().click(function(a){a.stopPropagation()})},e=function(){var b=a(this);b.css({right:-b.outerWidth()-100,display:"block"}),b.animate({right:0})},f=function(b,c){void 0===c&&(c=800);var d=a(this),e=setTimeout(function(){d.animate({right:[-d.outerWidth(),"swing"]},{duration:c,start:function(){setTimeout(function(){d.animate({opacity:0},{duration:c/2,queue:!1})},c/2)},done:function(){d.remove()}})},b);return d.data("timeout",e),e};a.fn.wsNotify=function(b){return c[b]?c[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.wsNotify"):c.init.apply(this,arguments)}}(jQuery),function(a){var b="wsSelectAll";jQuery.fn.wsSelectAll=function(){var c=a(this);return c.on("change."+b,function(){var b=a(":checkbox",c.data("selectall"));c.prop("checked")?b.prop("checked",!0):b.prop("checked",!1)}),c}}(jQuery),function(a){"use strict";var b="tabs",c={init:function(d){return this.each(function(){var e=a(this),f=e.data(b);if(!f){f=a.extend({tabContent:".tabs--content",activeTabClass:"active",activeClass:"active",hiddenInputName:"openTab",updateHash:!1},d),a(this).data(b,f),c.update.apply(e);var g=a(':hidden[name="'+f.hiddenInputName+'"]'),h=a(':hidden[name="'+f.hiddenInputName+'[]"]');if(h.length)h.each(function(){c.open.apply(e,[a(this).val().toString()])});else if(g.length)c.open.apply(e,[a(g).val().toString()]);else if(window.location.hash){var i=window.location.hash.substr(1);a.extend(e.data(b),{hash:i}),a.inArray(i,f.validIds)>=0&&c.open.apply(e,[i])}a(this).on("click."+b,"li > a",function(a){c.update.apply(e);var b=this.hash.substr(1);b&&(a.preventDefault(),f.updateHash&&(window.location.hash="#"+b),c.open.apply(e,[b,a]))})}})},update:function(){return this.each(function(){var c=a(this),d=c.data(b);d.validIds=[],a("li > a",c).each(function(){var a=this.hash.substr(1);a&&d.validIds.push(a)})})},destroy:function(){return this.each(function(){var c=a(this),d=c.data(b);a(window).unbind("."+b),a(document).off("."+b,"li > a"),d[b].remove(),c.removeData(b)})},open:function(c,d){return this.each(function(){var e=a(this),f=e.data(b),g=jQuery().nearest?e.nearest(f.tabContent):e.next(f.tabContent);if(!(a.inArray(c,f.validIds)<0&&"first"!==c&&"last"!==c)&&("first"===c?c=f.validIds[0]:"last"===c&&(c=f.validIds[f.validIds.length-1]),g.length)){e.children("li").each(function(){var b=a("a:first",this);if(b.length){var e=b.get(0).hash.substr(1);e&&(e===c?(a(this).addClass(f.activeTabClass),void 0!==d&&window.location.hash&&f.updateHash&&(window.location.hash="#"+e)):a(this).removeClass(f.activeTabClass))}});var h=a("#"+c,g).addClass(f.activeClass);setTimeout(function(){h.trigger("onTabOpen",[e[0],c])}),g.children().not(a("#"+c)).removeClass(f.activeClass)}})}};a.fn.tabs=function(b){return c[b]?c[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.tabs"):c.init.apply(this,arguments)}}(jQuery);